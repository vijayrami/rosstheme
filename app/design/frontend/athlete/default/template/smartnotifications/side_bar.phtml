<?php 
/*
  * Velan Info Services India Pvt Ltd.
  *
  * NOTICE OF LICENSE
  *
  * This source file is subject to the EULA
  * that is bundled with this package in the file LICENSE.txt.
  * It is also available through the world-wide-web at this URL:
  * http://store.velanapps.com/License.txt
  *
  /***************************************
  *         MAGENTO EDITION USAGE NOTICE *
  * *************************************** */
  /* This package designed for Magento COMMUNITY edition
  * Velan Info Services does not guarantee correct work of this extension
  * on any other Magento edition except Magento COMMUNITY edition.
  * Velan Info Services does not provide extension support in case of
  * incorrect edition usage.
  /***************************************
  *         DISCLAIMER   *
  * *************************************** */
  /* Do not edit or add to this file if you wish to upgrade Magento to newer
  * versions in the future.
  * ****************************************************
  * @category   Velanapps
  * @package    Smartnotifications
  * @author     Velan Team
  * @copyright  Copyright (c) 2013 Velan Info Services India Pvt Ltd. (http://www.velanapps.com)
  * @license    http://store.velanapps.com/License.txt
*/

	//Loading Smartnotifications Helper-Data
	$helperData = Mage::helper('smartnotifications/data');

	// Get the Status of the Scroller in helperData
	$sideBarActive = $helperData->sideBarStatus();
	
	// Get the Position of the Scroller in helperData
	$sideBarContent = $helperData->sideBarContent();

	// Get the Status of the Scroller in helperData
	$sideBarColor = $helperData->sideColor();
	
	// Get the Position of the Scroller in helperData
	$sideBorderColor = $helperData->sideBorderColor();

	//Proceed if the Status is Enabled
	if($sideBarActive == 1):	
	?>
	<div class="side"  id="smartnotificationsSideBar">	
		<div id = "closeImage"> <a id="sideCloseButton" class="sideClose" href="javascript:" onclick="return test();"></a></div>
		<div id = "sideContent">
			<?php echo $sideBarContent;?>
		</div>
		
	</div>	
		
	<script type="text/javascript">
	var sideNotification = 1;
		jQuery(document).ready(function () {
			jQuery("#smartnotificationsSideBar").css({'background-color':'<?php echo $sideBarColor ;?>','border-color':'<?php echo $sideBorderColor ;?>'});
		
		jQuery(window).scroll(function () {
				if (jQuery(window).scrollTop() >= (jQuery("body").height()/3))
				{
						if (!jQuery("#smartnotificationsSideBar").hasClass('sideposition') && sideNotification == 1){
							jQuery("#smartnotificationsSideBar").animate({'right' : '5px' },200);
							jQuery("#smartnotificationsSideBar").addClass('sideposition');
							sideNotification = 0;
						}
				}	

				else {			
						if (jQuery("#smartnotificationsSideBar").hasClass('sideposition') && sideNotification == 0){
							jQuery("#smartnotificationsSideBar").animate({'right' : '-800px' },200);
							jQuery("#smartnotificationsSideBar").removeClass('sideposition');
							sideNotification = 1;
						}
				}
		});
	});
	
	function  test()
	{
		jQuery("#smartnotificationsSideBar").animate({'right' : '-800px' },200);
	}	
	</script>
<?php endif;?>


